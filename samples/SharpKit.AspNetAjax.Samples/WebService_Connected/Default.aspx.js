//@AutoGenerated
var IsConnected = false;
function btnConnectForNewCustomers_Click()
{
	var btn = document.getElementById("btnConnectForNewCustomers");
	if (!IsConnected)
	{
		IsConnected = true;
		btn.innerText = "Disconnect";
		var service = new WebService_Connected.ConnectedWebService();
		service.WaitForNewCustomers(1500, ConnectForNewCustomers_SucceededCallback, ConnectForNewCustomers_ErrorCallback);
	}
	else
	{
		IsConnected = false;
		btn.innerText = "Connect";
	}
}
function ConnectForNewCustomers_ErrorCallback(error, userContext, methodName)
{
	if (IsConnected)
	{
		var service = new WebService_Connected.ConnectedWebService();
		service.WaitForNewCustomers(1500, ConnectForNewCustomers_SucceededCallback, null);
	}
}
function ConnectForNewCustomers_SucceededCallback(result, context, methodName)
{
	if (IsConnected)
	{
		var customers = result;
		if (customers != null)
		{
			var divRepeater = document.getElementById("divRepeater1");
			for (var i = 0;i < customers.length;i++)
			{
				var cust = customers[i];
				var div = document.createElement("div");
				div.innerText = "ID=" + cust.ID + " Name=" + cust.Text;
				divRepeater.appendChild(div);
			}
		}
		var service = new WebService_Connected.ConnectedWebService();
		service.WaitForNewCustomers(1500, ConnectForNewCustomers_SucceededCallback, null);
	}
}
